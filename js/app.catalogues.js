(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{606:function(t,e,a){t.exports={primary:"$primary"}},607:function(t,e,a){t.exports={primary:"$primary"}},619:function(t,e,a){"use strict";var s=a(606);a.n(s).a},620:function(t,e,a){"use strict";var s=a(607);a.n(s).a},625:function(t,e,a){"use strict";a.r(e);var s=a(24),o=a.n(s),r=a(150),i=a.n(r),n=a(11),c=a.n(n),l=a(1),u=a.n(l),d=a(211),g=a.n(d),p=a(3),h=a(212),f=a(0),m=a.n(f),v=a(213),y=a.n(v),C=a(95),b=a.n(C),_=a(23),$=a(12),O=Object.freeze({or:"OR",and:"AND"}),w=Object.freeze({or:"OR",and:"AND"}),F={name:"catalogueFacets",components:{},data:function(){return{limits:{min:50,max:100},facetOperators:O,expanded:[],showCatalogueDetails:!1,showOperator:$.a.enable.filter.operator,catalogue:{},browser:{isIE:!!document.documentMode}}},computed:c()({},Object(p.c)("catalogues",["getAvailableFacets","getCataloguesCount","getFacetOperator","getFacetGroupOperator","getLimit","getPage"]),{facetOperatorWatcher:function(){return this.getFacetOperator},facetGroupOperatorWatcher:function(){return this.getFacetGroupOperator}}),methods:c()({isEmpty:b.a,isBoolean:y.a,has:u.a,isNil:m.a,getCountryFlagImg:_.a,getTranslationFor:_.b},Object(p.b)("catalogues",["toggleFacet","addFacet","removeFacet","setFacetOperator","setFacetGroupOperator","setPage","setPageCount"]),{sortByCount:function(t){return t.slice().sort((function(t,e){return 0!==e.count-t.count?e.count-t.count:t.name<e.name?-1:1}))},isExpanded:function(t){return this.expanded.indexOf(t)>-1},toggleExpanded:function(t){var e=this.expanded.indexOf(t);e>-1?this.expanded.splice(e):this.expanded.push(t)},facetIsSelected:function(t,e){if(!Object.prototype.hasOwnProperty.call(this.$route.query,t))return!1;var a=this.$route.query[t];return Array.isArray(a)||(a=[a]),a.indexOf(e)>-1},facetClicked:function(t,e){this.toggleFacet(t,e),this.resetPage()},toggleFacet:function(t,e){Object.prototype.hasOwnProperty.call(this.$route.query,[t])||this.$router.push({query:Object.assign({},this.$route.query,o()({},t,[]))});var a=this.$route.query[t].slice();Array.isArray(a)||(a=[a]);var s=a.indexOf(e);s>-1?a.splice(s,1):a.push(e),this.$router.push({query:Object.assign({},this.$route.query,o()({},t,a))})},toggleFacetOperator:function(){var t=this.getFacetOperator;t=t===O.and?O.or:O.and,this.setFacetOperator(t),this.setFacetGroupOperator(t)},toggleFacetGroupOperator:function(){var t=this.getFacetGroupOperator;t=t===w.and?w.or:w.and,this.setFacetGroupOperator(t)},resetPage:function(){this.$router.replace({query:Object.assign({},this.$route.query,{page:1})})},triggerResize:function(){setTimeout((function(){window.dispatchEvent(new Event("resize"))}),200)}}),watch:{facetOperatorWatcher:{handler:function(t){this.$router.replace({query:Object.assign({},this.$route.query,{facetOperator:t})})}},facetGroupOperatorWatcher:{handler:function(t){this.$router.replace({query:Object.assign({},this.$route.query,{facetGroupOperator:t})})}}},created:function(){},mounted:function(){}},x=(a(619),a(4)),S=Object(x.a)(F,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container catalogue-facets"},[a("div",{staticClass:"row mx-3 mr-md-0"},[a("div",{staticClass:"col"},[t.showOperator?a("div",{staticClass:"row facet-field mb-3"},[a("div",{staticClass:"col list-group pr-0"},[a("a",{staticClass:"list-group-item facet-header-item"},[a("span",{staticClass:"facet-title"},[t._v(t._s(t.$t("message.datasetFacets.settings")))])]),t._v(" "),a("div",{staticClass:"form-group list-group-item list-group-item-action d-flex justify-content-between align-items-center"},[t._v("\n            "+t._s(t.$t("message.datasetFacets.operator"))+"\n            "),t.browser.isIE?t._e():a("span",{staticClass:"switch switch-sm"},[a("label",{staticClass:"mr-1",attrs:{for:"switch-facet-operator"}},[t._v(t._s(t.$t("message.datasetFacets.and")))]),t._v(" "),a("input",{staticClass:"switch-sm",attrs:{type:"checkbox",id:"switch-facet-operator"},domProps:{checked:"OR"===t.getFacetOperator},on:{click:t.toggleFacetOperator}}),t._v(" "),a("label",{attrs:{for:"switch-facet-operator"}},[t._v(t._s(t.$t("message.datasetFacets.or")))])]),t._v(" "),t.browser.isIE?a("span",[a("div",{staticClass:"form-check form-check-inline"},[a("input",{staticClass:"form-check-input",attrs:{type:"radio",name:"radio-facet-operator",id:"radio-and"},domProps:{checked:t.getFacetOperator===t.facetOperators.and},on:{click:function(e){return t.changeFacetOperator(t.facetOperators.and)}}}),t._v(" "),a("label",{staticClass:"form-check-label",attrs:{for:"radio-and"}},[t._v(t._s(t.$t("message.datasetFacets.and")))])]),t._v(" "),a("div",{staticClass:"form-check form-check-inline"},[a("input",{staticClass:"form-check-input",attrs:{type:"radio",name:"radio-facet-operator",id:"radio-or"},domProps:{checked:t.getFacetOperator===t.facetOperators.or},on:{click:function(e){return t.changeFacetOperator(t.facetOperators.or)}}}),t._v(" "),a("label",{staticClass:"form-check-label",attrs:{for:"radio-or"}},[t._v(t._s(t.$t("message.datasetFacets.or")))])])]):t._e()])])]):t._e(),t._v(" "),t._l(t.getAvailableFacets,(function(e,s){return e.items.length>0&&"Countries"===e.title?a("div",{key:s,staticClass:"row facet-field mb-3",class:{"mt-3":s>0}},[a("div",{staticClass:"col list-group pr-0"},[a("a",{staticClass:"list-group-item facet-header-item"},[a("span",{staticClass:"facet-title"},[t._v(t._s(t.$t("message.datasetFacets.facets."+e.title.toLowerCase())))])]),t._v(" "),t._l(t.sortByCount(e.items),(function(s,o){return(t.isExpanded(e.title)?o<=t.limits.max:o<=t.limits.min)?a("button",{key:o,staticClass:"facet list-group-item list-group-item-action d-flex justify-content-between align-items-center",class:{active:t.facetIsSelected(e.id,s.id)},on:{click:function(a){return t.facetClicked(e.id,s.id)}}},[t._v("\n            "+t._s(s.title)+"\n            "),a("span",{staticClass:"facet-count badge"},[t._v(t._s(s.count))])]):t._e()})),t._v(" "),e.items.length>t.limits.min?a("button",{staticClass:"btn btn-primary",on:{click:function(a){return t.toggleExpanded(e.title)}}},[t.isExpanded(e.title)?t._e():a("i",{staticClass:"material-icons expand-more animated"},[t._v("expand_more")]),t._v(" "),t.isExpanded(e.title)?a("i",{staticClass:"material-icons expand-less animated"},[t._v("expand_less")]):t._e()]):t._e()],2)]):t._e()}))],2)])])}),[],!1,null,"45ab7150",null).exports,k=a(216),q=a(220),P=a(37),L={name:"catalogues",dependencies:["CatalogueService"],components:{selectedFacetsOverview:a(221).a,dataInfoBox:k.a,catalogueFacets:S,pagination:q.a},props:{infiniteScrolling:{type:Boolean,default:!1},pagination:{type:Boolean,default:!0}},data:function(){return{autocompleteData:{suggestions:{},show:!0},datasetCounts:{},debouncedOnBottomScroll:g()(this.onBottomScroll,500),facetFields:[],lang:this.locale,query:"",sortSelected:"relevance desc, modification_date desc, title.en asc",sortSelectedLabel:this.$t("message.sort.relevance")}},head:{meta:[{property:"robots",content:"follow,noindex"}]},computed:c()({},Object(p.c)("catalogues",["getCatalogues","getCataloguesCount","getFacets","getLimit","getLoading","getOffset","getPage","getPageCount","getAvailableFacets"]),{page:function(){return this.$route.query.page},facets:function(){var t={},e=!0,a=!1,s=void 0;try{for(var o,r=this.facetFields[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var i=o.value,n=this.$route.query[i];n?Array.isArray(n)||(n=[n]):n=[],t[i]=n}}catch(t){a=!0,s=t}finally{try{e||null==r.return||r.return()}finally{if(a)throw s}}return t}}),methods:c()({},Object(p.b)("catalogues",["autocompleteQuery","loadCatalogues","loadAdditionalCatalogues","setQuery","setPage","useService","addFacet","setFacets","setFacetOperator","setFacetGroupOperator","setPageCount","setSort","setLoading"]),{has:u.a,getTranslationFor:_.b,getCountryFlagImg:_.a,autocomplete:function(t){var e=this;this.autocompleteQuery(t).then((function(a){e.autocompleteData.suggestions=[];var s=a.data.result,o=[],r=!0,i=!1,n=void 0;try{for(var c,l=s.results[Symbol.iterator]();!(r=(c=l.next()).done);r=!0){var u=c.value;o.push(u)}}catch(t){i=!0,n=t}finally{try{r||null==l.return||l.return()}finally{if(i)throw n}}e.autocompleteData.suggestions=o,e.autocompleteData.show=0!==t.length})).catch((function(){}))},handleSuggestionSelection:function(t){this.$router.push({path:"/"===this.$route.path.slice(-1)?"".concat(this.$route.path).concat(t.idName):"".concat(this.$route.path,"/").concat(t.idName)})},changePageTo:function(t){this.$router.replace({query:Object.assign({},this.$route.query,{page:t})}),this.scrollTo(0,0)},onScroll:function(){var t=this.$el.querySelectorAll(".catalogue"),e=t[t.length-1];e&&(e.getBoundingClientRect().bottom-window.innerHeight<=0&&this.debouncedOnBottomScroll())},onBottomScroll:function(){var t=this;this.$nextTick((function(){t.$Progress.start(),t.setLoading(!0),t.loadAdditionalCatalogues().then((function(){t.$Progress.finish(),t.setLoading(!1)})).catch((function(){t.$Progress.fail(),t.setLoading(!1)}))}))},scrollTo:function(t,e){window.scrollTo(t,e)},removeDuplicatesOf:function(t){return i()(new Set(t))},initPage:function(){var t=parseInt(this.$route.query.page,10);t>0?this.setPage(t):this.setPage(1)},initQuery:function(){var t=this.$route.query.query;t?(this.query=t,this.setQuery(t)):(t="",this.setQuery(""))},initFacets:function(){for(var t=0,e=["country","catalog","categories","keywords","format","licence"];t<e.length;t++){var a=e[t];if(this.facetFields.push(a),Object.prototype.hasOwnProperty.call(this.$route.query,[a])){var s=!0,r=!1,i=void 0;try{for(var n,c=this.$route.query[a][Symbol.iterator]();!(s=(n=c.next()).done);s=!0){var l=n.value;this.addFacet({field:a,facet:l})}}catch(t){r=!0,i=t}finally{try{s||null==c.return||c.return()}finally{if(r)throw i}}}else this.$router.replace({query:Object.assign({},this.$route.query,o()({},a,[]))})}},initFacetOperator:function(){var t=this.$route.query.facetOperator;"AND"!==t&&"OR"!==t||this.setFacetOperator(t)},initFacetGroupOperator:function(){var t=this.$route.query.facetOperator;"AND"!==t&&"OR"!==t||this.setFacetGroupOperator(t)},initSort:function(){var t=this.$route.query.sort;t&&("relevance+desc"===(t=t.split(",")[0].toLowerCase())&&(this.sortSelectedLabel=this.$t("message.sort.relevance")),t.includes("title")&&t.includes("asc")&&(this.sortSelectedLabel=this.$t("message.sort.nameAZ")),t.includes("title")&&t.includes("desc")&&(this.sortSelectedLabel=this.$t("message.sort.nameZA")),"modification_date+desc"===t&&(this.sortSelectedLabel=this.$t("message.sort.lastUpdated")),"release_date+desc"===t&&(this.sortSelectedLabel=this.$t("message.sort.lastCreated")),this.sortSelected=t)},getFileTypeColor:function(t){return h.a.getFileTypeColor(t)},filterDateFormatUS:function(t){return P.a.formatUS(t)},filterDateFormatEU:function(t){return P.a.formatEU(t)},filterDateFromNow:function(t){return P.a.fromNow(t)},setSortMethod:function(t,e,a){this.sortSelectedLabel=a,this.sortSelected="".concat(t,"+").concat(e)},changeQuery:function(t){this.$router.replace({query:Object.assign({},this.$route.query,{query:t})}),this.setQuery(t)}}),watch:{facets:{handler:function(t){this.setFacets(t)},deep:!0},page:function(t){var e=parseInt(t,10);e>0?this.setPage(e):this.setPage(1)},sortSelected:{handler:function(t){this.$router.replace({query:Object.assign({},this.$route.query,{sort:t})}),this.setSort(t)},deep:!0}},created:function(){var t=this;this.useService(this.CatalogueService),this.initPage(),this.initQuery(),this.initSort(),this.initFacetOperator(),this.initFacetGroupOperator(),this.initFacets(),this.$nextTick((function(){t.$Progress.start(),t.loadCatalogues({}).then((function(){t.setPageCount(Math.ceil(t.getCataloguesCount/t.getLimit)),t.$Progress.finish()})).catch((function(){return t.$Progress.fail()}))})),this.infiniteScrolling&&window.addEventListener("scroll",this.onScroll)},mounted:function(){},beforeDestroy:function(){this.infiniteScrolling&&window.removeEventListener("scroll",this.onScroll)}},j=(a(620),Object(x.a)(L,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid catalogues"},[a("div",{staticClass:"row"},[a("catalogue-facets",{staticClass:"col-md-3 col-12 mb-3 mb-md-0 px-0"}),t._v(" "),a("section",{staticClass:"col-md col-12"},[a("div",{staticClass:"filters-group"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"dropdown d-inline-block"},[a("button",{staticClass:"btn btn-primary dropdown-toggle",attrs:{type:"button",id:"dropdown-sort-by","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v("\n                "+t._s(t.$t("message.sort.sortBy")+": "+t.sortSelectedLabel)+"\n              ")]),t._v(" "),a("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdown-sort-by"}},[a("button",{staticClass:"dropdown-item",on:{click:function(e){t.setSortMethod("relevance","desc",t.$t("message.sort.relevance"))}}},[t._v(t._s(t.$t("message.sort.relevance")))]),t._v(" "),a("button",{staticClass:"dropdown-item",on:{click:function(e){t.setSortMethod("title."+t.$i18n.locale,"asc",t.$t("message.sort.nameAZ"))}}},[t._v("\n                  "+t._s(t.$t("message.sort.nameAZ")))]),t._v(" "),a("button",{staticClass:"dropdown-item",on:{click:function(e){t.setSortMethod("title."+t.$i18n.locale,"desc",t.$t("message.sort.nameZA"))}}},[t._v("\n                  "+t._s(t.$t("message.sort.nameZA")))]),t._v(" "),a("button",{staticClass:"dropdown-item",on:{click:function(e){t.setSortMethod("modification_date","desc",t.$t("message.sort.lastUpdated"))}}},[t._v("\n                  "+t._s(t.$t("message.sort.lastUpdated")))]),t._v(" "),a("button",{staticClass:"dropdown-item",on:{click:function(e){t.setSortMethod("release_date","desc",t.$t("message.sort.lastCreated"))}}},[t._v("\n                  "+t._s(t.$t("message.sort.lastCreated")))])])])])]),t._v(" "),a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col"},[a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],staticClass:"form-control",attrs:{type:"text","aria-label":t.$t("message.datasets.searchBar.placeholder"),placeholder:t.$t("message.datasets.searchBar.placeholder")},domProps:{value:t.query},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.changeQuery(t.query)},click:function(e){t.autocompleteData.show=t.autocompleteData.suggestions.length>0&&0!=t.query.length&&!t.autocompleteData.show},input:function(e){e.target.composing||(t.query=e.target.value)}}}),t._v(" "),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button"},on:{click:function(e){return t.changeQuery(t.query)}}},[a("i",{staticClass:"material-icons"},[t._v("search")])])]),t._v(" "),t.autocompleteData.show?a("div",{staticClass:"suggestion-list-group"},[a("ul",{staticClass:"list-group suggestion-list"},t._l(t.autocompleteData.suggestions,(function(e){return a("button",{key:e.id,staticClass:"list-group-item list-group-item-action",on:{click:function(a){return t.handleSuggestionSelection(e)}}},[t._v("\n                    "+t._s(t.getTranslationFor(e.title,t.$i18n.locale,[e.country.id].concat(e.languages)))+"\n                  ")])})),0)]):t._e()])])])]),t._v(" "),a("div",{staticClass:"alert alert-primary mt-3 d-flex flex-row",class:{"alert-danger":t.getCataloguesCount<=0&&!t.getLoading}},[a("div",[t._v("\n          "+t._s(t.getLoading?t.$t("message.catalogues.loadingMessage"):t.getCataloguesCount+"\n          "+t.$t("message.catalogues.countMessage"))+"\n        ")]),t._v(" "),t.getLoading?a("div",{staticClass:"loading-spinner ml-3"}):t._e()]),t._v(" "),a("selectedFacetsOverview",{attrs:{"selected-facets":t.getFacets}}),t._v(" "),t._l(t.getCatalogues,(function(e){return a("data-info-box",{key:e.idName,ref:"catalogueBox",refInFor:!0,staticClass:"catalogue",attrs:{"link-to":"datasets?catalog="+e.idName+"&showcataloguedetails=true",title:t.getTranslationFor(e.title,t.$i18n.locale,t.has(e,"country.id")?[e.country.id].concat(e.languages):e.languages)||e.id,description:t.getTranslationFor(e.description,t.$i18n.locale,t.has(e,"country.id")?[e.country.id].concat(e.languages):e.languages),"body-img":t.getCountryFlagImg(t.has(e,"country.id")?e.country.id:"eu"),"footer-tags":[""+(t.has(e,"count")?e.count:0)]}})})),t._v(" "),t.getLoading?a("div",{staticClass:"loading-spinner mx-auto mt-3 mb-3"}):t._e()],2)],1),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"column col-12 col-md-8 offset-md-4"},[a("div",{staticClass:"d-flex flex-row justify-content-center"},[t.pagination?a("pagination",{staticClass:"mt-3",attrs:{"items-count":t.getCataloguesCount,"items-per-page":t.getLimit,"click-handler":t.changePageTo,"get-page":this.getPage,"next-button-text":t.$t("message.pagination.nextPage"),"prev-button-text":t.$t("message.pagination.previousPage")}}):t._e()],1)])])])}),[],!1,null,"77decb54",null));e.default=j.exports}}]);
//# sourceMappingURL=app.catalogues.js.map